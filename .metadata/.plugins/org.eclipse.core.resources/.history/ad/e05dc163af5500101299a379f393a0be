package day04;

import java.io.*;
import java.util.*;

public class Resultprocessing {

	    public static void main(String[] args) {
	        String inputFile = "marks.txt";
	        String outputFile = "results.txt";

	        try (
	            BufferedReader reader = new BufferedReader(new FileReader(inputFile));
	            BufferedWriter writer = new BufferedWriter(new FileWriter(outputFile))
	        ) {
	            String line = reader.readLine(); // Read header
	            writer.write("StudentName,Total,Average\n"); // Output header

	            while ((line = reader.readLine()) != null) {
	                String[] parts = line.split(",");

	                if (parts.length < 4) continue; // skip invalid lines

	                String name = parts[0];
	                int total = 0;

	                for (int i = 1; i < parts.length; i++) {
	                    total += Integer.parseInt(parts[i].trim());
	                }

	                double average = total / (double)(parts.length - 1);
	                writer.write(String.format("%s,%d,%.2f\n", name, total, average));
	            }

	            System.out.println("Results written to " + outputFile);

	        } catch (IOException | NumberFormatException e) {
	            System.err.println("Error processing file: " + e.getMessage());
	        }
	    }
	}